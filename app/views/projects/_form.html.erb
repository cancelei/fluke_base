<%= form_with(
      url: url,
      method: method,
      model: project,
      class: "space-y-6",
      local: true
    ) do |form| %>
  <%= render 'shared/form_errors', object: project %>

  <%= render 'privacy_info' %>

  <div class="grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
    <div class="sm:col-span-6">
      <%= form.label :name, class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.text_field :name, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
        <%= render_public_field_checkbox(form, :name, project) %>
      </div>
    </div>

    <div class="sm:col-span-3">
      <%= form.label :stage, class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.select :stage, 
            [
              ["Idea", Project::IDEA], 
              ["Prototype", Project::PROTOTYPE],
              ["Launched", Project::LAUNCHED],
              ["Scaling", Project::SCALING]
            ],
            {}, 
            { class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" } %>
        <%= render_public_field_checkbox(form, :stage, project) %>
      </div>
    </div>

    <div class="sm:col-span-3">
      <%= form.label :category, class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.select :category, 
            [
              ["Technology", "Technology"], 
              ["Health", "Health"], 
              ["Education", "Education"],
              ["Finance", "Finance"],
              ["Entertainment", "Entertainment"],
              ["E-commerce", "E-commerce"],
              ["AI/ML", "AI/ML"],
              ["Blockchain", "Blockchain"],
              ["Social", "Social"],
              ["Other", "Other"]
            ],
            { include_blank: "Select a category" }, 
            { class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" } %>
        <%= render_public_field_checkbox(form, :category, project) %>
      </div>
    </div>

    <div class="sm:col-span-6">
      <%= form.label :collaboration_type, "Looking For", class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.select :collaboration_type, 
            [
              ["Mentor", Project::SEEKING_MENTOR], 
              ["Co-Founder", Project::SEEKING_COFOUNDER],
              ["Both Mentor and Co-Founder", Project::SEEKING_BOTH]
            ],
            { include_blank: "Select what you're looking for" }, 
            { class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" } %>
        <%= render_public_field_checkbox(form, :collaboration_type, project) %>
      </div>
      <p class="mt-1 text-sm text-gray-500">Indicate what type of collaboration you're seeking</p>
    </div>

    <div class="sm:col-span-6">
      <%= form.label :description, class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-start">
        <%= form.text_area :description, rows: 4, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
        <%= render_public_field_checkbox(form, :description, project) %>
      </div>
    </div>

    <div class="sm:col-span-6">
      <%= form.label :repository_url, "GitHub Repository URL", class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <div class="flex rounded-md shadow-sm w-full">
          <span class="inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-50 px-3 text-gray-500 sm:text-sm">
            github.com/
          </span>
          <%= form.text_field :repository_url, 
                            placeholder: "username/repository", 
                            class: "block w-full min-w-0 flex-1 rounded-none rounded-r-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
        </div>
        <%= render_public_field_checkbox(form, :repository_url, project) %>
      </div>
      <p class="mt-1 text-sm text-gray-500">Optional. The GitHub repository for this project (e.g., username/repository)</p>
    </div>

    <div class="sm:col-span-6">
      <h3 class="text-lg font-medium leading-6 text-gray-900 mb-3">Additional Details</h3>
      <p class="mt-1 text-sm text-gray-500 mb-4">These details help mentors understand your project better</p>
    </div>

    <div class="sm:col-span-6">
      <%= form.label :current_stage, "Current Project Stage", class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.text_field :current_stage, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
        <%= render_public_field_checkbox(form, :current_stage, project) %>
      </div>
      <p class="mt-1 text-sm text-gray-500">Describe your project's current development stage in more detail</p>
    </div>

    <div class="sm:col-span-6">
      <%= form.label :target_market, "Target Market", class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-start">
        <%= form.text_area :target_market, rows: 3, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
        <%= render_public_field_checkbox(form, :target_market, project) %>
      </div>
      <p class="mt-1 text-sm text-gray-500">Describe your target audience or customer base</p>
    </div>

    <div class="sm:col-span-3">
      <%= form.label :funding_status, "Funding Status", class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.select :funding_status, 
            [
              ["Bootstrapped", "Bootstrapped"], 
              ["Seeking Funding", "Seeking Funding"],
              ["Pre-seed", "Pre-seed"],
              ["Seed", "Seed"],
              ["Series A", "Series A"],
              ["Series B+", "Series B+"],
              ["Profitable", "Profitable"]
            ],
            { include_blank: "Select funding status" }, 
            { class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" } %>
        <%= render_public_field_checkbox(form, :funding_status, project) %>
      </div>
    </div>

    <div class="sm:col-span-3">
      <%= form.label :team_size, "Team Size", class: "block text-sm font-medium text-gray-700" %>
      <div class="mt-1 flex items-center">
        <%= form.select :team_size, 
            [
              ["Solo Founder", "Solo Founder"], 
              ["2-5 people", "2-5 people"],
              ["6-10 people", "6-10 people"],
              ["11-25 people", "11-25 people"],
              ["26-50 people", "26-50 people"],
              ["50+ people", "50+ people"]
            ],
            { include_blank: "Select team size" }, 
            { class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" } %>
        <%= render_public_field_checkbox(form, :team_size, project) %>
      </div>
    </div>
    
    <!-- Hidden field to handle unchecked checkboxes -->
    <%= hidden_field_tag 'project[public_fields][]', '' %>
  </div>

  <div class="pt-5">
    <div class="flex justify-end">
      <%= link_to "Cancel", projects_path, class: "bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
      <%= form.submit submit_text, class: "ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
    </div>
  </div>
<% end %> 
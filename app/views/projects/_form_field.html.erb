<%#
  Reusable form field component
  Parameters:
  - form: form builder object
  - field_name: symbol for the field name
  - project: project object for privacy settings
  - label: custom label text (optional)
  - field_type: :text_field, :text_area, :select, etc.
  - options: hash of additional options
  - col_span: grid column span (default: 6)
  - help_text: optional help text
%>

<%
  col_span = local_assigns[:col_span] || 6
  label_text = local_assigns[:label] || field_name.to_s.humanize
  field_options = local_assigns[:options] || {}
  help_text = local_assigns[:help_text]
%>

<fieldset class="fieldset sm:col-span-<%= col_span %>">
  <%= form.label field_name, label_text, class: "fieldset-legend" %>
  <div class="flex <%= field_type == :text_area ? "items-start" : "items-center" %> gap-2">
    <% case field_type %>
    <% when :text_field %>
      <%= form.text_field field_name, field_options.merge(class: "input input-bordered w-full") %>
    <% when :text_area %>
      <%= form.text_area field_name, field_options.merge(class: "textarea textarea-bordered w-full", rows: field_options[:rows] || 3) %>
    <% when :select %>
      <%= form.select field_name,
                     field_options[:choices],
                     field_options[:select_options] || {},
                     field_options.merge(class: "select select-bordered w-full").except(:choices, :select_options) %>
    <% when :url_field %>
      <label class="input input-bordered flex items-center gap-2 w-full">
        <span class="text-base-content/60"><%= field_options[:prefix] || "https://" %></span>
        <%= form.text_field field_name, field_options.merge(class: "grow border-0 focus:ring-0 bg-transparent").except(:prefix) %>
      </label>
    <% end %>
    <%= render_public_field_checkbox(form, field_name, project) %>
  </div>
  <% if help_text %>
    <p class="text-xs text-base-content/60 mt-1"><%= help_text %></p>
  <% end %>
</fieldset>

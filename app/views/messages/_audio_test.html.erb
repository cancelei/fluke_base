<!-- Simple audio player test -->
<div class="bg-gray-100 rounded-lg p-3 mb-2" 
     data-controller="audio-player" 
     data-audio-player-src-value="<%= url_for(message.audio) if message.audio.attached? %>">
  
  <div class="flex items-center space-x-3">
    <!-- Play/Pause Button -->
    <button type="button" 
            data-audio-player-target="playBtn"
            data-action="click->audio-player#togglePlayback"
            class="flex items-center justify-center w-8 h-8 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white transition-colors"
            title="Play voice message">
      <svg data-audio-player-target="playIcon" class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
        <path d="M8 5v14l11-7z"/>
      </svg>
      <svg data-audio-player-target="pauseIcon" class="w-4 h-4 hidden" fill="currentColor" viewBox="0 0 24 24">
        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
      </svg>
    </button>
    
    <!-- Simple Progress Bar -->
    <div class="flex-1 bg-gray-200 rounded-full h-2 relative">
      <div data-audio-player-target="progress" 
           class="absolute left-0 top-0 h-full bg-indigo-600 rounded-full transition-all duration-100"
           style="width: 0%"></div>
    </div>
    
    <!-- Time Display -->
    <div class="text-xs text-gray-500 font-mono min-w-[3rem] text-right">
      <span data-audio-player-target="currentTime">0:00</span>
      /
      <span data-audio-player-target="duration">0:00</span>
    </div>
  </div>
  
  <!-- Waveform (optional) -->
  <div class="mt-2 flex items-center justify-center">
    <div data-audio-player-target="waveform" class="flex items-center space-x-1 text-gray-600">
      <!-- Waveform bars will be generated by JavaScript -->
    </div>
  </div>
  
  <!-- Hidden audio element -->
  <audio data-audio-player-target="audio" class="hidden" preload="metadata">
    <% if message.audio.attached? %>
      <source src="<%= url_for(message.audio) %>" type="<%= message.audio.content_type %>">
    <% end %>
    Your browser does not support the audio element.
  </audio>
</div>

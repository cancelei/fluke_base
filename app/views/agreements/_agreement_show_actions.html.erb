<div id="<%= "#{dom_id(@agreement)}_show_actions" %>">
  <% presenter = present(@agreement) %>

  <div class="mt-6 flex flex-wrap justify-start gap-3">
    <% if policy(@agreement).edit? %>
      <%= link_to "Edit Agreement", edit_agreement_path(@agreement), class: "btn btn-primary" %>
    <% end %>

    <% if @agreement.has_counter_offers? %>
      <div class="text-warning">Note: This agreement has a counter offer from another person</div>
    <% end %>

    <% if presenter.can_be_accepted_by?(current_user) %>
      <button data-turbo-command="Agreements::AcceptCommand#execute"
              data-agreement-id="<%= @agreement.id %>"
              data-confirm="Are you sure you want to accept this agreement?"
              class="btn btn-success">
        Accept Agreement
      </button>
    <% end %>

    <% if presenter.can_be_rejected_by?(current_user) %>
      <button data-turbo-command="Agreements::RejectCommand#execute"
              data-agreement-id="<%= @agreement.id %>"
              data-confirm="Are you sure you want to reject this agreement?"
              class="btn btn-error">
        Reject Agreement
      </button>
    <% end %>

    <% if presenter.can_make_counter_offer?(current_user) %>
      <%= ui_button_to "Counter Offer", counter_offer_agreement_path(@agreement),
          method: :post,
          variant: :warning,
          loading_text: "Processing...",
          confirm: "Are you sure you want to make a counter offer?" %>
    <% end %>

    <% if presenter.can_be_cancelled_by?(current_user) %>
      <button data-turbo-command="Agreements::CancelCommand#execute"
              data-agreement-id="<%= @agreement.id %>"
              data-confirm="Are you sure you want to cancel this agreement?"
              class="btn btn-error">
        Cancel Agreement
      </button>
    <% end %>

    <% if presenter.can_be_completed_by?(current_user) %>
      <button data-turbo-command="Agreements::CompleteCommand#execute"
              data-agreement-id="<%= @agreement.id %>"
              data-confirm="Are you sure you want to mark this agreement as completed?"
              class="btn btn-success">
        Mark as Completed
      </button>
    <% end %>

    <% if @agreement.active? && (current_user == @agreement.initiator || current_user == @agreement.other_party) %>
      <%= link_to "Time Logs", time_logs_path(@agreement.project), class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

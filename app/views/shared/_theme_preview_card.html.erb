<%# Theme Preview Card - Uses data-theme attribute for proper CSS variable isolation %>
<%# Each card is an iframe to completely isolate the theme context from parent %>
<button type="button"
        class="group relative overflow-hidden rounded-lg border-2 transition-all cursor-pointer w-full <%= is_selected ? "ring-2 ring-offset-2 ring-primary" : "hover:scale-[1.02] border-base-300" %>"
        data-theme-card
        data-theme-value="<%= theme[:id] %>"
        data-action="click->theme#switch">

  <%# Theme Preview Container with data-theme for proper color isolation %>
  <div data-theme="<%= theme[:id] %>" class="w-full overflow-hidden rounded-t-md bg-base-100">
    <%# Preview Header - macOS-style window dots %>
    <div class="px-3 py-2 flex items-center gap-1.5 bg-base-200">
      <div class="w-2.5 h-2.5 rounded-full bg-error"></div>
      <div class="w-2.5 h-2.5 rounded-full bg-warning"></div>
      <div class="w-2.5 h-2.5 rounded-full bg-success"></div>
    </div>

    <%# Preview Content Area %>
    <div class="p-3 space-y-3">
      <%# Mock navbar %>
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <div class="w-4 h-4 rounded bg-primary"></div>
          <div class="h-2 w-12 rounded bg-base-content/30"></div>
        </div>
        <div class="flex gap-2">
          <div class="h-2 w-6 rounded bg-base-content/20"></div>
          <div class="h-2 w-6 rounded bg-base-content/20"></div>
        </div>
      </div>

      <%# Mock content card %>
      <div class="rounded-md p-2 space-y-1.5 bg-base-200">
        <div class="h-2 w-full rounded bg-base-content/40"></div>
        <div class="h-2 w-3/4 rounded bg-base-content/25"></div>
      </div>

      <%# Mock buttons row - showing primary, secondary, accent colors %>
      <div class="flex gap-1.5">
        <div class="flex-1 h-6 rounded-md bg-primary"></div>
        <div class="flex-1 h-6 rounded-md bg-secondary"></div>
        <div class="flex-1 h-6 rounded-md bg-accent"></div>
      </div>
    </div>

    <%# Theme Name Footer %>
    <div class="px-3 py-2 text-center bg-base-200">
      <span class="text-sm font-medium text-base-content"><%= theme[:name] %></span>
    </div>
  </div>

  <%# Checkmark for selected theme %>
  <div data-checkmark class="absolute top-1 right-1 rounded-full p-0.5 bg-success <%= is_selected ? "" : "hidden" %>">
    <svg class="w-3 h-3 text-success-content" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
    </svg>
  </div>

  <%# Hover overlay %>
  <div class="absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div>
</button>

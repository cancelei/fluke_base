<div class="card bg-base-100 shadow-xl mb-6">
  <div class="card-body">
    <div class="flex justify-between items-center">
      <div>
        <h3 class="text-lg font-medium leading-6 text-base-content">Profile Information</h3>
        <p class="mt-1 text-sm text-base-content/60">Personal details.</p>
      </div>
      <div>
        <%= link_to "Edit Profile", profile_edit_path, class: "btn btn-primary btn-sm" %>
      </div>
    </div>
  </div>
  <div class="border-t border-base-200">
    <dl>
      <div class="bg-base-200/50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Profile Picture</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <%= render Ui::AvatarComponent.new(user: @user, size: :lg) %>
        </dd>
      </div>
      <div class="bg-base-100 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Full name</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0"><%= @user.full_name %></dd>
      </div>
      <div class="bg-base-200/50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Email address</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0"><%= @user.email %></dd>
      </div>
      <% if @user.github_username.present? %>
      <div class="bg-base-100 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">GitHub</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <%= link_to "https://github.com/#{@user.github_username}", target: "_blank", class: "link link-primary" do %>
            github.com/<%= @user.github_username %>
            <%= render Ui::IconComponent.new(name: :chevron_right, size: :xs, css_class: "inline-block ml-1") %>
          <% end %>
        </dd>
      </div>
      <% end %>

      <div class="bg-base-100 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">GitHub Integration</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <% if @user.github_app_connected? %>
            <span class="badge badge-success gap-1">Connected via GitHub App</span>
            <% if @user.github_app_installations.any? %>
              <p class="mt-1 text-xs text-base-content/60">
                Installed on: <%= @user.github_app_installations.map(&:account_login).join(", ") %>
              </p>
            <% end %>
            <p class="mt-1 text-xs text-base-content/60">Manage in <%= link_to "profile settings", profile_edit_path(anchor: "github-connection"), class: "link link-primary" %>.</p>
          <% elsif @user.github_token.present? %>
            <span class="badge badge-warning gap-1">Using Personal Access Token</span>
            <p class="mt-1 text-xs text-base-content/60">
              Consider upgrading to GitHub App in <%= link_to "profile settings", profile_edit_path(anchor: "github-connection"), class: "link link-primary" %>.
            </p>
          <% else %>
            <span class="badge badge-ghost gap-1">Not connected</span>
            <p class="mt-1 text-xs text-base-content/60">
              Connect GitHub in <%= link_to "profile settings", profile_edit_path(anchor: "github-connection"), class: "link link-primary" %> to enable repository tracking.
            </p>
          <% end %>
        </dd>
      </div>

      <div class="bg-base-100 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Social Media</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <%= render Ui::SocialLinksComponent.new(user: @user, variant: :badges) %>
          <div class="mt-2">
            <%= link_to "Edit Social Media", profile_edit_path(anchor: "social-media"), class: "link link-primary text-sm" %>
          </div>
        </dd>
      </div>
    </dl>
  </div>
</div>

<div class="card bg-base-100 shadow-xl mb-6">
  <div class="card-body">
    <div class="flex justify-between items-center">
      <div>
        <h3 class="text-lg font-medium leading-6 text-base-content">Developer Settings</h3>
        <p class="mt-1 text-sm text-base-content/60">API access and integrations.</p>
      </div>
    </div>
  </div>
  <div class="border-t border-base-200">
    <dl>
      <div class="bg-base-200/50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">API Tokens</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <% token_count = current_user.api_tokens.active.count %>
          <% if token_count > 0 %>
            <span class="badge badge-success gap-1"><%= token_count %> active token<%= token_count == 1 ? '' : 's' %></span>
          <% else %>
            <span class="badge badge-ghost gap-1">No tokens</span>
          <% end %>
          <p class="mt-1 text-xs text-base-content/60">
            <%= link_to "Manage API Tokens", user_settings_api_tokens_path, class: "link link-primary" %> for flukebase_connect and integrations.
          </p>
        </dd>
      </div>
      <div class="bg-base-100 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">FlukeBase Connect</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <%= link_to connect_path, class: "link link-primary" do %>
            View Connect Portal
            <%= render Ui::IconComponent.new(name: :chevron_right, size: :xs, css_class: "inline-block ml-1") %>
          <% end %>
          <p class="mt-1 text-xs text-base-content/60">
            Integrate AI assistants with your development workflow.
          </p>
        </dd>
      </div>
    </dl>
  </div>
</div>

<div class="card bg-base-100 shadow-xl">
  <div class="card-body">
    <h3 class="text-lg font-medium leading-6 text-base-content">Account Statistics</h3>
  </div>
  <div class="border-t border-base-200">
    <dl>
      <div class="bg-base-200/50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Projects</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <%= @user.projects.count %>
          <% if @user.projects.any? %>
            (<%= link_to "View All", projects_path, class: "link link-primary" %>)
          <% end %>
        </dd>
      </div>
      <div class="bg-base-100 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Agreements</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0">
          <%= @user.all_agreements.count %>
          <% if @user.all_agreements.any? %>
            (<%= link_to "View All", agreements_path, class: "link link-primary" %>)
          <% end %>
        </dd>
      </div>
      <div class="bg-base-200/50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-base-content/60">Joined</dt>
        <dd class="mt-1 text-sm text-base-content sm:col-span-2 sm:mt-0"><%= @user.created_at.strftime("%B %d, %Y") %></dd>
      </div>
    </dl>
  </div>
</div>

<% if available_branches&.any? %>
  <div class="mt-2 grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="flex items-center mb-2 lg:mb-0">
      <label for="branch" class="mr-2 text-sm font-medium text-base-content/70">Branch:</label>
      <div class="relative">
        <details class="dropdown">
          <summary class="flex items-center w-full rounded-md bg-base-100 border border-base-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 cursor-pointer list-none">
            <span class="mr-2">
              <%= selected_branch.present? ? (available_branches.find { |id, _val| id==selected_branch.to_i
                }&.last || "main") : "All Branches" %>
            </span>
            <svg class="h-5 w-5 text-base-content/50" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd" />
            </svg>
          </summary>
          <div class="dropdown-content absolute left-0 z-10 mt-2 w-auto origin-top-left rounded-md bg-base-100 py-1 shadow-lg ring-1 ring-base-content ring-opacity-5">
            <%= link_to "All Branches", Rails.application.routes.url_helpers.project_github_logs_path(project, branch: nil, user_name:,
              agreement_only:), class: "block px-4 py-2 text-sm text-base-content/70 hover:bg-base-200" %>
              <% available_branches.each do |id, branch| %>
                <%= link_to (branch.presence || "main"), Rails.application.routes.url_helpers.project_github_logs_path(project, branch: id,
                  user_name:, agreement_only:),
                  class: "block px-4 py-2 text-sm text-base-content/70 hover:bg-base-200" %>
                  <% end %>
          </div>
        </details>
      </div>
    </div>

    <div class="flex items-center mb-2 lg:mb-0">
      <a href="<%= Rails.application.routes.url_helpers.project_github_logs_path(project, branch: selected_branch, user_name:, agreement_only: agreement_only ? nil : true) %>"
        class="flex items-center" data-turbo-frame="_top">
        <div class="flex items-center justify-center w-full">

          <label for="toggleB" class="flex items-center cursor-pointer">
            <!-- toggle -->
            <div class="relative">
              <!-- input -->
              <input type="checkbox" id="toggleB" class="toggle toggle-success toggle-xl" <%= "checked" if agreement_only %> >
            </div>
            <!-- label -->
            <div class="ml-3 text-base-content/70 font-medium">
              Agreement Only
            </div>
          </label>
        </div>
      </a>
    </div>

    <div class="flex items-center mb-2 lg:mb-0">
      <label for="user_filter" class="mr-2 text-sm font-medium text-base-content/70">User:</label>
      <div class="relative">
        <details class="dropdown">
          <summary class="flex items-center w-full rounded-md bg-base-100 border border-base-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 cursor-pointer list-none">
            <span class="mr-2 truncate">
              <%= user_name.present? ? user_name : "All Users" %>
            </span>
            <svg class="h-5 w-5 text-base-content/50" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd" />
            </svg>
          </summary>
          <div class="dropdown-content absolute left-0 z-10 mt-2 w-auto origin-top-left rounded-md bg-base-100 py-1 shadow-lg ring-1 ring-base-content ring-opacity-5">
            <%= link_to "All Users", Rails.application.routes.url_helpers.project_github_logs_path(project, branch: selected_branch, user_name: nil,
              agreement_only:),
              class: "block px-4 py-2 text-sm text-base-content/70 hover:bg-base-200 truncate",
              data: { turbo_frame: "_top" } %>
              <% available_users.each do |name| %>
                <%= link_to name, Rails.application.routes.url_helpers.project_github_logs_path(project, branch: selected_branch, user_name: name,
                  agreement_only:),
                  class: "block px-4 py-2 text-sm text-base-content/70 hover:bg-base-200 truncate",
                  data: { turbo_frame: "_top" } %>
                  <% end %>
          </div>
        </details>
      </div>
    </div>

    <div class="flex items-end mb-2 lg:mb-0">
      <% if selected_branch || agreement_only || user_name %>
        <%= link_to "Clear Filters", Rails.application.routes.url_helpers.project_github_logs_path(project),
          class: "ml-2 btn btn-outline btn-sm",
          data: { turbo_frame: "_top" } %>
          <% end %>
    </div>
  </div>
<% end %>

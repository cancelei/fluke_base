<div id="manual_time_log_form" class="border-t border-base-200">
  <div class="px-6 py-6">
    <%= form_with(model: time_log_manual, url: create_manual_time_logs_path(@project), method: :post, data: { turbo: true }, html: { autocomplete: "off" }) do |f| %>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <%= f.hidden_field :manual_entry, value: true %>

        <div class="md:col-span-2">
          <%= f.label :description, class: "label" do %>
            <span class="label-text font-semibold">Description</span>
          <% end %>
          <%= f.text_area :description, class: "textarea textarea-bordered w-full", rows: 3, placeholder: "Describe the work performed..." %>
          <% if time_log_manual.errors[:description].any? %>
            <p class="mt-2 text-sm text-error"><%= time_log_manual.errors[:description].first %></p>
          <% end %>
        </div>

        <div>
          <%= f.label :started_at, class: "label" do %>
            <span class="label-text font-semibold">Start Time</span>
          <% end %>
          <%= f.datetime_field :started_at, class: "input input-bordered w-full" %>
          <% if time_log_manual.errors[:started_at].any? %>
            <p class="mt-2 text-sm text-error"><%= time_log_manual.errors[:started_at].first %></p>
          <% end %>
        </div>

        <div>
          <%= f.label :ended_at, class: "label" do %>
            <span class="label-text font-semibold">End Time</span>
          <% end %>
          <%= f.datetime_field :ended_at, class: "input input-bordered w-full", max: Time.zone.now.strftime("%Y-%m-%dT%H:%M") %>
          <% if time_log_manual.errors[:ended_at].any? %>
            <p class="mt-2 text-sm text-error"><%= time_log_manual.errors[:ended_at].first %></p>
          <% end %>
        </div>

        <div class="md:col-span-2">
          <%= f.label :milestone_id, class: "label" do %>
            <span class="label-text font-semibold">Milestone</span>
          <% end %>
          <%= f.collection_select :milestone_id, milestones, :id, :title,
                { include_blank: "Select a milestone..." },
                { class: "select select-bordered w-full" } %>
          <% if time_log_manual.errors[:milestone_id].any? %>
            <p class="mt-2 text-sm text-error"><%= time_log_manual.errors[:milestone_id].first %></p>
          <% end %>
        </div>
      </div>
      <div class="mt-6">
        <%= f.submit "Add Time Log", class: "btn btn-warning" %>
      </div>
    <% end %>
  </div>
</div>

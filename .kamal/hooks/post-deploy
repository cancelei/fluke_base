#!/bin/bash

# Post-deploy hook for Kamal deployments
# This script runs after successful deployment
#
# Available environment variables:
# KAMAL_RECORDED_AT
# KAMAL_PERFORMER
# KAMAL_VERSION
# KAMAL_HOSTS
# KAMAL_ROLE (if set)
# KAMAL_DESTINATION (if set)
# KAMAL_RUNTIME

echo "Post-deploy hook started for $KAMAL_DESTINATION"
echo "Deployed by: $KAMAL_PERFORMER"
echo "Version: $KAMAL_VERSION"
echo "Runtime: $KAMAL_RUNTIME seconds"

# Database migrations and seeding are now handled by docker-entrypoint
# This hook is reserved for deployment-specific tasks like:
# - Cache warming
# - CDN purging
# - Notification sending
# - Health checks

echo "ℹ️  Database migrations and seeding handled by docker-entrypoint"
echo "✅ Post-deploy hook completed for $KAMAL_DESTINATION"
